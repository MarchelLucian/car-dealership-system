<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Available Offers</title>

    <link rel="stylesheet" th:href="@{/css/client.css}" />
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
</head>
<body>
<div class="page-wrapper">
    <!-- AUTH BOX -->

    <div class="auth-container">
        <!-- Avatar -->
        <div class="avatar">
            <span th:if="${isLogged}" th:text="${clientInitials}"></span>
            <span th:unless="${isLogged}">?</span>
        </div>

        <!-- --------------------- GUEST MODE (vertical) --------------------- -->
        <div class="auth-buttons-vertical" th:unless="${isLogged}">
            <a href="/client-login" class="auth-btn">Sign In</a>
            <a href="/client-register" class="auth-btn">Create Account</a>
        </div>

        <!-- --------------------- LOGGED MODE (horizontal) --------------------- -->
        <div class="auth-buttons-horizontal" th:if="${isLogged}">
            <a href="/client-favorites" class="auth-btn small-btn">
                <i class="fa-regular fa-heart auth-icon"></i>
                Favorites
            </a>
            <a href="/client-orders" class="auth-btn small-btn">
                <i class="fa-solid fa-car-side auth-icon"></i>
                My Orders
            </a>
            <a href="/client-details" class="auth-btn small-btn">
                <i class="fa-solid fa-circle-info auth-icon"></i>
                Account Details
            </a>

            <a href="/logout" class="auth-btn logout-btn small-btn">
                <i class="fa-solid fa-door-open auth-icon"></i>
                Logout
            </a>
        </div>
    </div>

    <!-- SEARCH BAR -->
    <div class="search-wrapper">
        <input
                type="text"
                id="searchInput"
                class="search-bar"
                placeholder="Search by Brand, Model or Year..."
                autocomplete="off"
        />
        <button id="searchBtn" class="search-btn">
            <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        <!-- containerul pentru sugestii -->
        <div id="autocompleteList" class="autocomplete-list"></div>
    </div>


    <!-- Left Sidebar -->
    <div class="sidebar">
        <h2>Filters</h2>

        <!-- PRICE -->
        <div class="filter-row">
            <div class="filter-item">
                <label>Minimum Price</label>
                <input id="minPrice" type="number" placeholder="Ex: 5000">
            </div>

            <div class="filter-item">
                <label>Maximum Price</label>
                <input id="maxPrice" type="number" placeholder="Ex: 30000">
            </div>
        </div>

        <!-- YEAR -->
        <div class="filter-row">
            <div class="filter-item">
                <label>Minimum Year</label>
                <input id="minYear" type="number" placeholder="Ex: 2005">
            </div>

            <div class="filter-item">
                <label>Maximum Year</label>
                <input id="maxYear" type="number" placeholder="Ex: 2024">
            </div>
        </div>

        <!-- MILEAGE -->
        <div class="filter-section">
            <label>Maximum Mileage (km)</label>
            <input id="maxMileage" type="number" placeholder="Ex: 150000">
        </div>


        <!-- BRANDS -->
        <div class="filter-section">
            <label>Available Brands:</label>
            <div id="brandsContainer"></div>
        </div>

        <div class="brands-controls">
            <div id="showMoreBrands" class="show-more-brands">Show more brands...</div>
            <div id="showLessBrands" class="show-less-brands">Show less brands</div>
        </div>



        <!-- ADVANCED OPTIONS TOGGLE BUTTON -->
        <div id="advancedToggle" class="advanced-toggle">
            <i class="fa-solid fa-atom"></i>
            Advanced Options
            <span id="advancedArrow">▼</span>
        </div>

        <!-- ADVANCED OPTIONS WRAPPER (HIDDEN BY DEFAULT) -->
        <div id="advancedSection" class="advanced-section">


        <!-- TRANSMISSION -->
        <div class="filter-section">
            <label>Transmission Type:</label>

            <div class="filter-inline centered">
                <div>
                    <input type="checkbox"  class="trans-filter" id="trans_manual" value="manuala">
                    <label for="trans_manual" style="font-weight: normal;">Manual</label>
                </div>
                <div>
                    <input type="checkbox" class="trans-filter" id="trans_auto" value="automata">
                    <label for="trans_auto" style="font-weight: normal;">Automatic</label>
                </div>
            </div>
        </div>


        <!-- NUMBER OF DOORS -->
        <div class="filter-section">
            <label>Number of Doors:</label>

            <div class="filter-inline centered">
                <div>
                    <input type="checkbox" class="door-filter" value="2">
                    <label style="font-weight: normal;">2</label>
                </div>
                <div>
                    <input type="checkbox" class="door-filter" value="4">
                    <label style="font-weight: normal;">4</label>
                </div>
            </div>
        </div>


        <!-- NUMBER OF SEATS -->
        <div class="filter-section">
            <label>Number of Seats:</label>

            <div class="seat-grid">

                <div class="seat-item">
                    <input type="checkbox" class="seat-filter" value="2">
                    <span>2</span>
                </div>

                <div class="seat-item">
                    <input type="checkbox" class="seat-filter" value="4">
                    <span>4</span>
                </div>

                <div class="seat-item">
                    <input type="checkbox" class="seat-filter" value="5">
                    <span>5</span>
                </div>

                <div class="seat-item">
                    <input type="checkbox" class="seat-filter" value="6">
                    <span>6</span>
                </div>

                <!-- ROW 2 -->
                <div class="row2">
                    <div class="seat-item">
                        <input type="checkbox" class="seat-filter" value="7">
                        <span>7</span>
                    </div>

                    <div class="seat-item">
                        <input type="checkbox" class="seat-filter" value="8">
                        <span>8</span>
                    </div>

                    <div class="seat-item">
                        <input type="checkbox" class="seat-filter" value="9">
                        <span>9</span>
                    </div>
                </div>
            </div>

        </div>
        <!-- Type of fuel -->
        <div class="filter-section">
            <label>Fuel Type:</label>

            <div class="fuel-grid">
                <div class="seat-item">
                    <input type="checkbox" class="fuel-filter" value="benzina">
                    <span>Petrol</span>
                </div>

                <div class="seat-item">
                    <input type="checkbox" class="fuel-filter" value="motorina">
                    <span>Diesel</span>
                </div>

                <div class="seat-item">
                    <input type="checkbox" class="fuel-filter" value="electric">
                    <span>Electric</span>
                </div>

                <div class="seat-item">
                    <input type="checkbox" class="fuel-filter" value="hibrid">
                    <span>Hybrid</span>
                </div>
            </div>
        </div>

        </div>

        <button id="applyFiltersBtn" class="filter-btn">Apply Filters</button>

        <div class="reset-filters" id="resetFilters">Reset Filters</div>

    </div>



    <!-- Main Content -->
    <div class="main-content">
        <h1>Available Offers</h1>
        
        <div id="resultsCount" class="results-count"></div>
        <!-- Sorting Bar -->
        <div class="sort-box">
            <label>Sort by:</label>
            <select id="sortField">
                <option value="pret">Price</option>
                <option value="an">Year</option>
                <option value="kilometraj">Mileage</option>
            </select>

            <select id="sortOrder">
                <option value="cresc">
                    Ascending
                </option>
                <option value="desc">
                    Descending
                </option>
            </select>

            <button id="sortBtn" class="sort-btn">
                <span>Sort</span>
                <i id="sortIcon" class="fa-solid fa-arrow-down-short-wide"></i>
            </button>

        </div>

        <div id="lista">
            <div th:each="m : ${masini}" class="car-box">
                <p><b>Brand:</b> [[${m.marca}]]</p>
                <p><b>Model:</b> [[${m.model}]]</p>
                <p><b>Year:</b> [[${m.an}]]</p>
                <p><b>Mileage:</b> [[${m.kilometraj}]] km</p>
                <p><b>Price:</b> [[${m.pret}]] €</p>
            </div>
        </div>

        <button id="loadMore">
            <i class="fa-solid fa-caret-down"></i>
             Load More Offers</button>
        <a href="/" class="back-btn">
            <i class="fa-solid fa-person-walking-arrow-loop-left"></i>
            Back to Home</a>
    </div>
</div>
>

<script th:src="@{/js/client.js}"></script>
</body>
</html>
